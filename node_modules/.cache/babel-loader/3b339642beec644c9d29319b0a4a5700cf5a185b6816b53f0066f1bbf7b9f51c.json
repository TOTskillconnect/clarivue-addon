{"ast":null,"code":"import e from \"../../../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v4.js\";\nconst t = \"1.0.0\",\n  o = {\n    onMessage: function (e, t) {\n      if (!e || !e.data || \"object\" != typeof e.data || null === e.data) return void a(\"Invalid message format, ignoring. Message: %o\", e);\n      if (!function (e, t) {\n        if (e && e !== window.top) return a(\"Should not process message because it is not coming from the top window\"), !1;\n        if (t === n) try {\n          return \"https:\" === new URL(t).protocol;\n        } catch (e) {\n          return d(\"Invalid message origin URL:\", e), !1;\n        }\n        return !1;\n      }(e.source, e.origin)) return void a(\"Message source/origin not allowed, ignoring.\");\n      const {\n          args: o\n        } = e.data,\n        [, r] = null != o ? o : [],\n        i = (() => {\n          try {\n            return JSON.parse(r);\n          } catch (e) {\n            return d(\"Failed to parse response message:\", e), null;\n          }\n        })();\n      if (!i || \"NestedAppAuthResponse\" !== i.messageType) return void a(\"Invalid response format, ignoring. Message: %o\", e);\n      t(r);\n    }\n  };\nlet n = null,\n  r = !1;\nfunction i(t, i, p = !1) {\n  if (r = p, !t) throw new Error(\"Cannot polyfill nestedAppAuthBridge as the current window does not exist\");\n  if (!i) throw new Error(\"Top origin is required to initialize the Nested App Auth Bridge\");\n  try {\n    const e = new URL(i);\n    if (\"https:\" !== e.protocol) throw new Error(`Invalid top origin: ${i}. Only HTTPS origins are allowed.`);\n    n = e.origin;\n  } catch (e) {\n    throw new Error(`Failed to initialize bridge: invalid top origin: ${i}`);\n  }\n  const u = t;\n  if (u.nestedAppAuthBridge) return void a(\"Nested App Auth Bridge is already present\");\n  const g = function (t) {\n    const r = new WeakMap(),\n      {\n        onMessage: i\n      } = o,\n      p = e => t => i(t, e);\n    return {\n      addEventListener: (e, o) => {\n        if (\"message\" === e) {\n          const n = p(o);\n          r.set(o, n), t.addEventListener(e, n);\n        } else a(`Event ${e} is not supported by nestedAppAuthBridge`);\n      },\n      postMessage: o => {\n        if (!t.top) throw new Error(\"window.top is not available for posting messages\");\n        try {\n          const r = JSON.parse(o);\n          if (\"object\" == typeof r && \"NestedAppAuthRequest\" === r.messageType) {\n            const r = function (t) {\n              const o = Date.now();\n              return {\n                id: s(),\n                uuid: e(),\n                func: \"nestedAppAuth.execute\",\n                timestamp: o,\n                apiVersionTag: \"v2_nestedAppAuth.execute\",\n                monotonicTimestamp: o,\n                args: [],\n                data: t\n              };\n            }(o);\n            if (t === t.top || !n) return void d(\"Not in an embedded iframe; skipping postMessage.\");\n            t.top.postMessage(r, n);\n          }\n        } catch (e) {\n          return void d(\"Failed to parse message:\", e, \"Original message:\", o);\n        }\n      },\n      removeEventListener: (e, o) => {\n        const n = r.get(o);\n        n && (t.removeEventListener(e, n), r.delete(o));\n      }\n    };\n  }(u);\n  g && (u.nestedAppAuthBridge = g);\n}\nfunction s() {\n  return \"undefined\" != typeof crypto && crypto.randomUUID ? crypto.randomUUID() : Math.random().toString(36).substring(2, 11);\n}\nfunction a(...e) {\n  r && console.log(...e);\n}\nfunction d(...e) {\n  r && console.error(...e);\n}\nexport { i as initialize, t as version };","map":{"version":3,"names":["e","t","o","onMessage","data","a","window","top","n","URL","protocol","d","source","origin","args","r","i","JSON","parse","messageType","p","Error","u","nestedAppAuthBridge","g","WeakMap","addEventListener","set","postMessage","Date","now","id","s","uuid","func","timestamp","apiVersionTag","monotonicTimestamp","removeEventListener","get","delete","crypto","randomUUID","Math","random","toString","substring","console","log","error","initialize","version"],"sources":["/Users/tobitowoju/clarivue-addon/clarivue-addon/node_modules/@microsoft/teams-js/dist/esm/packages/teams-js/src/private/nestedAppAuth/nestedAppAuthBridge.js"],"sourcesContent":["import e from\"../../../../../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v4.js\";const t=\"1.0.0\",o={onMessage:function(e,t){if(!e||!e.data||\"object\"!=typeof e.data||null===e.data)return void a(\"Invalid message format, ignoring. Message: %o\",e);if(!function(e,t){if(e&&e!==window.top)return a(\"Should not process message because it is not coming from the top window\"),!1;if(t===n)try{return\"https:\"===new URL(t).protocol}catch(e){return d(\"Invalid message origin URL:\",e),!1}return!1}(e.source,e.origin))return void a(\"Message source/origin not allowed, ignoring.\");const{args:o}=e.data,[,r]=null!=o?o:[],i=(()=>{try{return JSON.parse(r)}catch(e){return d(\"Failed to parse response message:\",e),null}})();if(!i||\"NestedAppAuthResponse\"!==i.messageType)return void a(\"Invalid response format, ignoring. Message: %o\",e);t(r)}};let n=null,r=!1;function i(t,i,p=!1){if(r=p,!t)throw new Error(\"Cannot polyfill nestedAppAuthBridge as the current window does not exist\");if(!i)throw new Error(\"Top origin is required to initialize the Nested App Auth Bridge\");try{const e=new URL(i);if(\"https:\"!==e.protocol)throw new Error(`Invalid top origin: ${i}. Only HTTPS origins are allowed.`);n=e.origin}catch(e){throw new Error(`Failed to initialize bridge: invalid top origin: ${i}`)}const u=t;if(u.nestedAppAuthBridge)return void a(\"Nested App Auth Bridge is already present\");const g=function(t){const r=new WeakMap,{onMessage:i}=o,p=e=>t=>i(t,e);return{addEventListener:(e,o)=>{if(\"message\"===e){const n=p(o);r.set(o,n),t.addEventListener(e,n)}else a(`Event ${e} is not supported by nestedAppAuthBridge`)},postMessage:o=>{if(!t.top)throw new Error(\"window.top is not available for posting messages\");try{const r=JSON.parse(o);if(\"object\"==typeof r&&\"NestedAppAuthRequest\"===r.messageType){const r=function(t){const o=Date.now();return{id:s(),uuid:e(),func:\"nestedAppAuth.execute\",timestamp:o,apiVersionTag:\"v2_nestedAppAuth.execute\",monotonicTimestamp:o,args:[],data:t}}(o);if(t===t.top||!n)return void d(\"Not in an embedded iframe; skipping postMessage.\");t.top.postMessage(r,n)}}catch(e){return void d(\"Failed to parse message:\",e,\"Original message:\",o)}},removeEventListener:(e,o)=>{const n=r.get(o);n&&(t.removeEventListener(e,n),r.delete(o))}}}(u);g&&(u.nestedAppAuthBridge=g)}function s(){return\"undefined\"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).substring(2,11)}function a(...e){r&&console.log(...e)}function d(...e){r&&console.error(...e)}export{i as initialize,t as version};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}